# ────────────────────────────────────────────────────────────────────────────────
# File: open-actions.conf (refined)
# Purpose: Lightweight rules for clicks (open-in-place UX)
# Policy: Text/images open as overlay; logs tail in OS window
# Docs: https://sw.kovidgoyal.net/kitty/open_actions/
# ────────────────────────────────────────────────────────────────────────────────


# Tail .log files in a separate OS window with a slightly smaller font
protocol file
ext log
action launch --title ${FILE} --type=os-window tail -f ${FILE_PATH}
action change_font_size current -2


# Open any file with a fragment (e.g., from hyperlink_grep) in the editor overlay
protocol file
fragment_matches [0-9]+
action launch --type=overlay $EDITOR +$FRAGMENT $FILE_PATH


# Open plain text without fragments in the editor overlay
protocol file
mime text/*
action launch --type=overlay $EDITOR $FILE_PATH


# Open images inline via icat in an overlay window
protocol file
mime image/*
action launch --type=overlay kitty +kitten icat --hold $FILE_PATH


# Generic filelist fragments → paste to terminal
protocol filelist
action send_text all ${FRAGMENT}
